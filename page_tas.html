<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="mediaTAS.css" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>

  <body>
      <div >
          <a  href="page_principale.html"><button id="btntas">Page précédente</button></a>
      </div>
    <div class="d-flex justify-content-around flex-wrap w-50">
      <div class="d-flex justify-content-around w-100">
        <div id="bloc">
          <div>Donneur</div>
        </div>
        <div id="bloc2">
          <div>Receveur</div>
        </div>
      </div>
      <div class="d-flex justify-content-around w-100">
        <div id="donne"></div>
        <div id="recev"></div>
      </div>
      <div>
        <button id="tas1" onclick="tiragePersonnes(array_name)">
          Tirer au sort
        </button>
      </div>
    </div>

    <div>
      <img src="cadeau.jpg" id="font" alt="" />
    </div>

    <script>
      let donne = document.querySelector("#donne");
      let recev = document.querySelector("#recev");
      let array_nameReceveur = [];
      let Utilisateurs = [
        {
          id: "1",
          name: "Bouchra",
        },
        {
          id: "2",
          name: "Alexis",
        },
        {
          id: "3",
          name: "Hanane",
        },
        {
          id: "4",
          name: "Mehdi",
        },
        {
          id: "5",
          name: "Olivier",
        },
        {
          id: "7",
          name: "Remi",
        },
        {
          id: "8",
          name: "Karim",
        },
        {
          id: "9",
          name: "Nelly",
        },
        {
          id: "10",
          name: "Xavier",
        },
        {
          id: "11",
          name: "Benoit",
        },
        {
          id: "12",
          name: "Samuel",
        },
        {
          id: "13",
          name: "Baptiste",
        },
        {
          id: "14",
          name: "Yacine",
        },
        {
          id: "15",
          name: "Messaoud",
        },
        {
          id: "16",
          name: "Ahmed",
        },
        {
          id: "17",
          name: "Gaetan",
        },
        {
          id: "18",
          name: "Simon",
        },
      ];

      let array_name = [];

      function DefArray() {
        Utilisateurs.forEach((v) => {
          array_name.push(v.name);
          array_nameReceveur.push(v.name);
        });
      }

      function tiragePersonnes(ArrayName) {
        let terminer = false;
        let number = randomNumber(ArrayName.length);
        let number2 = randomNumber(ArrayName.length);
        let donneur;
        let receveur;
        donneur = ArrayName[number];
        receveur = array_nameReceveur[number2];

        if (ArrayName.length === 0) {
          donneur = "";
          receveur = "";
          terminer = true;
        }
        console.log(ArrayName, array_nameReceveur);
        console.log(donneur, receveur);
        if (terminer === false) {
          if (donneur === receveur) {
            // console.log("if passé");
            while (donneur === receveur) {
              console.log("while passé", donneur, receveur);
              number2 = randomNumber(ArrayName.length);
              receveur = array_nameReceveur[number2];
              console.log("while passé", donneur, receveur);
            }
          }

          array_nameReceveur.splice(number2, 1);
          ArrayName.splice(number, 1);

          donne.innerHTML = donneur;
          recev.innerHTML = receveur;
        }
      }

      function randomNumber(max) {
        return Math.floor(Math.random() * max);
      }

      DefArray();

      tiragePersonnes(array_name);

      console.log(array_nameReceveur, array_name);
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
